{% extends "shared/base.html" %}
{% block content %}
    <h2 class="text-center my-2">Livros</h2>
    <div class="d-flex">
        {% if livros %}
            {% for livro in livros %}
                <div class="me-4 text-center">
                    <img class="" style="height: 15em" src="{{ livro.capa.url }}" alt="Capa do livro {{ livro.titulo }}">
                    <span class="d-block fw-bold mt-1 text-center" style="font-size: 0.8em">{{ livro.titulo }}</span>
                    <a name="btnDetalhes" id="detalhes_{{ livro.pk }}" class="btn btn-outline-warning w-100 mt-1" href="{% url 'detalhes' livro.pk %}" role="button">Detalhes</a>
                    {% if user.is_authenticated %}
                        <a name="btnEmprestimo" id="emprestimo_{{ livro.pk }}" class="btn btn-primary w-100 mt-1" href="{% url 'emprestimo' livro.pk %}" role="button">Reservar</a>
                    {% endif%}
                </div>
            {% endfor %}
        {% else %}
            <span>NÃ£o existem livros cadastrados</span>
        {% endif %}
        
    </div>

    <!-- Toast container -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="toast-message" class="toast align-items-center text-white bg-warning border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3000" style="min-width: 250px;">
            <div class="d-flex">
                <div class="toast-body">
                    {% if messages %}
                        {% for message in messages %}
                            <span>{{ message }}</span>
                        {% endfor %}
                    {% endif %}
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    


      <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Exibir toast se houver mensagens
            var toastEl = document.getElementById('toast-message');
            if (toastEl.querySelector('.toast-body span')) {
                var toast = new bootstrap.Toast(toastEl);
                toast.show();
            }
        });
    </script>

{% endblock %}
